"use strict";(self.webpackChunk_uniswap_interface=self.webpackChunk_uniswap_interface||[]).push([[7125],{97125:(e,t,n)=>{n.d(t,{ZI:()=>Ut,zD:()=>Ft,ZP:()=>Gt});var s=n(92936),r=n(5985),a=n(52843),i=n(75603),o=n(3167),d=n(36664),l=n(49108),u=(n(21422),n(11604)),c=n(66284),p=n(21989),m=n(3115),f="_1kuawcb rgw6ezbf rgw6ezd9 rgw6ez8bh rgw6ez45r rgw6ez45l",g="_1kuawc1 rgw6ez2dr rgw6ez2j9 rgw6ez2of rgw6ez27x rgw6ez4b9 rgw6ez3tf rgw6ez7zd rgw6ez1dr rgw6ez80x",x="rgw6ez149 rgw6ez1b9 rgw6ez49l rgw6ez80p",h="rgw6ezd3 rgw6ezb9 rgw6eze3 rgw6ez8bh rgw6ez45l rgw6ez45r rgw6ez4bf",v="_1kuawc7",I="rgw6ez3xr",y=n(61152);const T=y.keyframes`
  0% {
    stroke-dashoffset: 1000;
  }
  100% {
    stroke-dashoffset: 0;
  }
`,A=d.ZP.circle`
  stroke-dasharray: 1000;
  stroke-dashoffset: 0;
  -webkit-animation: ${T} linear;
  animation: ${T} linear;
  animation-duration: 160s;
  stroke: ${({theme:e})=>e.accent1};
`,b=()=>(0,s.jsx)(a.x,{display:"flex",position:"absolute",children:(0,s.jsx)("svg",{height:"18px",width:"18px",children:(0,s.jsx)(A,{strokeWidth:"1.5",strokeLinecap:"round",style:{transform:"rotate(90deg)",transformOrigin:"50% 50%"},fill:"transparent",r:"8px",cx:"9px",cy:"9px"})})});var k=n(45079),w=n(52801),P=n(78052),E=n(41420),N=n(73335),C=n(45779),j=n(43454),O=n(64972);const _=(0,d.ZP)(m.UH)`
  border-radius: 12px;
  font-size: 14px;
  line-height: 16px;
  margin-left: 16px;
  padding: 12px 14px;
`,S=(0,d.ZP)(m.UH)`
  border-radius: 12px;
  flex: 1 1 auto;
  font-size: 14px;
  padding: 8px;
  width: 50%;
`,R=d.ZP.div`
  position: absolute;
  display: block;
  right: -11px;
  top: -11px;
  z-index: 1;
  transition: 250ms;
  width: 45px;
  height: 45px;
  display: flex;
  align-items: center;
  justify-content: center;
`,L=({onClick:e})=>(0,s.jsx)(R,{onClick:e,children:(0,s.jsx)(w.Xv,{})}),$=()=>(0,s.jsx)(a.x,{position:"relative",background:"loadingBackground",className:x,children:(0,s.jsxs)(a.x,{position:"absolute",textAlign:"center",left:"1/2",top:"1/2",style:{transform:"translate3d(-50%, -50%, 0)"},color:"gray500",fontSize:"12",fontWeight:"book",children:["Image",(0,s.jsx)("br",{}),"not",(0,s.jsx)("br",{}),"available"]})}),z=({asset:e,usdPrice:t,removeAsset:n,showRemove:r,grayscale:i,isMobile:o})=>{const{formatEther:d,formatNumberOrString:u}=(0,O.Gb)(),[y,T]=(0,C.useState)(!1),[A,b]=(0,C.useState)(!e.smallImageUrl),[P,S]=(0,C.useState)(!1),R=(0,C.useCallback)((()=>S(!0)),[]),z=(0,C.useCallback)((()=>S(!1)),[]),U=Boolean(r&&P&&!o),F=e.updatedPriceInfo?e.updatedPriceInfo.ETHPrice:e.priceInfo.ETHPrice,B=d({input:F,type:O.sw.NFTToken}),D=u({input:t?parseFloat((0,c.formatEther)(F))*t:t,type:O.sw.FiatNFTToken}),H=(0,C.useCallback)((t=>{t.preventDefault(),t.stopPropagation(),n([e])}),[e,n]);return(0,s.jsx)(j.Link,{to:(0,N.PZ)(e),style:{textDecoration:"none"},children:(0,s.jsxs)(l.X2,{className:g,onMouseEnter:R,onMouseLeave:z,children:[(0,s.jsxs)(a.x,{position:"relative",display:"flex",children:[r&&o&&(0,s.jsx)(L,{onClick:H}),!A&&(0,s.jsx)(a.x,{as:"img",src:e.smallImageUrl,alt:e.name,className:(0,p.default)(x,i&&!P&&v),onLoad:()=>{T(!0)},onError:()=>{b(!0)},visibility:y?"visible":"hidden"}),!y&&(0,s.jsx)(a.x,{position:"absolute",className:`${x} ${E.L}`}),A&&(0,s.jsx)($,{})]}),(0,s.jsxs)(l.sg,{overflow:"hidden",width:"full",color:i?"neutral2":"neutral1",children:[(0,s.jsxs)(l.X2,{overflow:"hidden",width:"full",whiteSpace:"nowrap",children:[(0,s.jsx)(a.x,{className:f,children:e.name??`#${e.tokenId}`}),e.susFlag&&(0,s.jsx)(k.yT,{})]}),(0,s.jsxs)(l.X2,{overflow:"hidden",whiteSpace:"nowrap",gap:"2",children:[(0,s.jsx)(a.x,{className:h,children:e.collectionName}),e.collectionIsVerified&&(0,s.jsx)(w.SA,{className:I})]})]}),U&&(0,s.jsx)(_,{onClick:H,emphasis:m.eI.medium,size:m.qE.medium,children:"Remove"}),(!U||o)&&(0,s.jsxs)(l.sg,{flexShrink:"0",alignItems:"flex-end",children:[(0,s.jsxs)(a.x,{className:"_1kuawc9 rgw6ez3sr rgw6ezbf rgw6ezd9 rgw6ez3xr",children:[B,"\xa0ETH"]}),(0,s.jsx)(a.x,{className:h,children:D})]})]})})},U=({asset:e,usdPrice:t,markAssetAsReviewed:n,top:r,isMobile:i})=>{var o;const{formatEther:d}=(0,O.Gb)(),c=u.O$.from(null===(o=e.updatedPriceInfo)||void 0===o?void 0:o.ETHPrice).gt(u.O$.from(e.priceInfo.ETHPrice)),p=(0,C.useCallback)((t=>{t.preventDefault(),t.stopPropagation();n(e,!1)}),[e,n]),f=(0,C.useCallback)((t=>{t.preventDefault(),t.stopPropagation();n(e,!0)}),[e,n]);return(0,s.jsxs)(l.sg,{className:"rgw6ez2p3 rgw6ez28l rgw6ezlf rgw6ezqx rgw6ez4ux rgw6ez3t3 rgw6ez4b9 rgw6ez7zp rgw6ez895 rgw6ez59f rgw6ez5yr rgw6ez1dr rgw6ez7zd",borderTopColor:r?"surface3":"transparent",children:[(0,s.jsxs)(l.X2,{className:"rgw6ezd3 rgw6ezb9 rgw6eze3 rgw6ez4dr rgw6ez3sr",children:[c?(0,s.jsx)(w.PH,{}):(0,s.jsx)(w.HE,{}),(0,s.jsx)(a.x,{children:`Price ${c?"increased":"decreased"} from ${d({input:e.priceInfo.ETHPrice,type:O.sw.NFTToken})} ETH`})]}),(0,s.jsx)(a.x,{style:{marginLeft:"-8px",marginRight:"-8px"},children:(0,s.jsx)(z,{asset:e,usdPrice:t,removeAsset:()=>{},isMobile:i})}),(0,s.jsxs)(l.X2,{gap:"8",justifyContent:"space-between",children:[(0,s.jsx)(S,{onClick:p,emphasis:m.eI.medium,size:m.qE.small,children:"Remove"}),(0,s.jsx)(S,{onClick:f,emphasis:m.eI.high,size:m.qE.small,children:"Keep"})]})]})},F=({assets:e})=>(0,s.jsx)(l.sg,{display:"grid",style:{gridTemplateColumns:`repeat(${e.length}, 20px)`,width:32+20*(e.length-1)+"px"},children:e.map(((e,t)=>(0,s.jsx)(a.x,{as:"img",src:e.smallImageUrl,width:"32",height:"32",borderStyle:"solid",borderWidth:"1px",borderColor:"surface1",borderRadius:"4",style:{zIndex:t},className:v},`${e.address}-${e.tokenId}`)))}),B=({assets:e,usdPrice:t,clearUnavailableAssets:n,didOpenUnavailableAssets:r,setDidOpenUnavailableAssets:a,isMobile:i})=>{const[o,d]=(0,C.useReducer)((e=>!e),!1),[u,c]=(0,C.useState)(8);if((0,C.useEffect)((()=>{if(!u)return void(r||(n(),a(!1)));const e=setInterval((()=>{c(u-1)}),1e3);return()=>clearInterval(e)}),[u,n,r,a]),!e||0===e.length)return null;const p=e.length>1,m=o||!p;return(0,s.jsx)(l.sg,{className:"rgw6ez2p3 rgw6ez28l rgw6ezlf rgw6ezqx rgw6ez4ux rgw6ez3tf rgw6ez4b9 rgw6ez7zp rgw6ez895 rgw6ez59f rgw6ez6df rgw6ez5yr rgw6ez1dr",children:(0,s.jsxs)(l.sg,{children:[(0,s.jsxs)(l.X2,{justifyContent:"space-between",marginBottom:m?"12":"0",cursor:p?"pointer":"default",onClick:()=>{p&&(!r&&a(!0),d())},children:[(0,s.jsxs)(l.X2,{gap:"12",color:"neutral2",className:P.Km,children:[!m&&(0,s.jsx)(F,{assets:e.slice(0,5)}),"No longer available"]}),p&&(0,s.jsx)(l.X2,{color:"neutral2",children:o?(0,s.jsx)(w.X_,{}):(0,s.jsx)(w.Xs,{})}),!r&&(0,s.jsxs)(l.X2,{position:"relative",width:"20",height:"20",color:"neutral1",justifyContent:"center",cursor:"pointer",onClick:n,children:[(0,s.jsx)(b,{}),(0,s.jsx)(w.Nb,{})]})]}),(0,s.jsx)(l.sg,{gap:"8",style:{marginLeft:"-8px",marginRight:"-8px"},children:m&&e.map((e=>(0,s.jsx)(z,{asset:e,usdPrice:t,removeAsset:()=>{},grayscale:!0,isMobile:i},e.id)))})]})})};var D=n(99251),H=n(74623),Z=n(81179),G=n(64653),M=n(41694),W=n(48313),V=n(45878);const K=()=>{const e=(0,D.c)((e=>e.bagStatus)),t=(0,D.c)((e=>e.setBagStatus)),n=(0,D.c)((e=>e.markAssetAsReviewed)),a=(0,D.c)((e=>e.didOpenUnavailableAssets)),o=(0,D.c)((e=>e.setDidOpenUnavailableAssets)),d=(0,D.c)((e=>e.itemsInBag)),u=(0,D.c)((e=>e.setItemsInBag)),c=(0,D.c)((e=>e.removeAssetsFromBag)),p=(0,i.d)(),m=(0,C.useMemo)((()=>(0,G.G7)(d)),[d]),f=(0,H.$)(),{unchangedAssets:g,priceChangedAssets:x,unavailableAssets:h,availableItems:v}=(0,C.useMemo)((()=>({unchangedAssets:m.filter((e=>e.status===Z.ZJ.ADDED_TO_BAG||e.status===Z.ZJ.REVIEWED)).map((e=>e.asset)),priceChangedAssets:m.filter((e=>e.status===Z.ZJ.REVIEWING_PRICE_CHANGE)).map((e=>e.asset)),unavailableAssets:m.filter((e=>e.status===Z.ZJ.UNAVAILABLE)).map((e=>e.asset)),availableItems:m.filter((e=>e.status!==Z.ZJ.UNAVAILABLE))})),[m]);return(0,C.useEffect)((()=>{const n=x.length>0,s=m.length>0;n&&(0,V.sendAnalyticsEvent)(r.Yz.NFT_BUY_BAG_CHANGED,{usd_value:f,bag_quantity:m.length,...(0,M.H)(x)}),e!==Z.s.IN_REVIEW||n||t(s?Z.s.CONFIRM_REVIEW:Z.s.ADDING_TO_BAG),e!==Z.s.CONFIRM_REVIEW||s||t(Z.s.ADDING_TO_BAG)}),[e,m,x,t,f]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l.sg,{display:x.length>0||h.length>0?"flex":"none",children:[h.length>0&&(0,s.jsx)(W.default,{logImpression:!0,eventOnTrigger:r.Yz.NFT_BUY_BAG_CHANGED,properties:{usd_value:f,bag_quantity:m.length,...(0,M.H)(h)},children:(0,s.jsx)(B,{assets:h,usdPrice:f,clearUnavailableAssets:()=>u(v),didOpenUnavailableAssets:a,setDidOpenUnavailableAssets:o,isMobile:p})}),x.map(((e,t)=>(0,s.jsx)(U,{asset:e,usdPrice:f,markAssetAsReviewed:n,top:0===t&&0===h.length,isMobile:p},e.id)))]}),(0,s.jsx)(l.sg,{children:g.slice(0).reverse().map((e=>(0,s.jsx)(z,{asset:e,usdPrice:f,removeAsset:c,showRemove:!0,isMobile:p},e.id)))})]})};var q=n(76078),X=n(66142),Y=n(87710),J=n(58543),Q=n(26410),ee=n(52529),te=n(75985),ne=n(55478),se=n(83792),re=n(12799),ae=n(41390),ie=n(70854),oe=n(92139);var de=n(97704),le=n(22722),ue=n(20376),ce=n(37891),pe=n(61592),me=n.n(pe),fe=n(97047),ge=n(39499),xe=n(69532),he=n(97994),ve=(e=>(e[e.WALLET_NOT_CONNECTED=0]="WALLET_NOT_CONNECTED",e[e.NOT_SUPPORTED_CHAIN=1]="NOT_SUPPORTED_CHAIN",e[e.INSUFFICIENT_BALANCE=2]="INSUFFICIENT_BALANCE",e[e.ERROR=3]="ERROR",e[e.IN_WALLET_CONFIRMATION=4]="IN_WALLET_CONFIRMATION",e[e.PROCESSING_TRANSACTION=5]="PROCESSING_TRANSACTION",e[e.FETCHING_TOKEN_ROUTE=6]="FETCHING_TOKEN_ROUTE",e[e.INVALID_TOKEN_ROUTE=7]="INVALID_TOKEN_ROUTE",e[e.NO_TOKEN_ROUTE_FOUND=8]="NO_TOKEN_ROUTE_FOUND",e[e.LOADING_ALLOWANCE=9]="LOADING_ALLOWANCE",e[e.IN_WALLET_ALLOWANCE_APPROVAL=10]="IN_WALLET_ALLOWANCE_APPROVAL",e[e.PROCESSING_APPROVAL=11]="PROCESSING_APPROVAL",e[e.REQUIRE_APPROVAL=12]="REQUIRE_APPROVAL",e[e.CONFIRM_UPDATED_PRICE=13]="CONFIRM_UPDATED_PRICE",e[e.PRICE_IMPACT_HIGH=14]="PRICE_IMPACT_HIGH",e[e.PAY=15]="PAY",e))(ve||{});function Ie(e,t,n,r,a){const i={handleClick:()=>{},buttonText:(0,s.jsx)(he.Trans,{i18nKey:"common.card.error.description"}),disabled:!0,warningText:void 0,warningTextColor:t.deprecated_accentWarning,helperText:void 0,helperTextColor:t.neutral2,buttonColor:t.accent1,buttonTextColor:t.deprecated_accentTextLightPrimary};return{0:{...i,handleClick:n??(()=>{}),disabled:!1,buttonText:(0,s.jsx)(xe.T,{})},1:{...i,handleClick:n??(()=>{}),buttonText:(0,s.jsx)(he.Trans,{i18nKey:"common.switchNetworks"}),disabled:!1,warningText:(0,s.jsx)(he.Trans,{i18nKey:"common.wrongNetwork"})},2:{...i,buttonText:(0,s.jsx)(he.Trans,{i18nKey:"common.pay.button"}),warningText:(0,s.jsx)(he.Trans,{i18nKey:"common.insufficient.funds"})},3:{...i,warningText:(0,s.jsx)(he.Trans,{i18nKey:"common.error.wrong.tryAgain"})},4:{...i,buttonText:(0,s.jsx)(he.Trans,{i18nKey:"common.proceedInWallet.short"})},5:{...i,buttonText:(0,s.jsx)(he.Trans,{i18nKey:"common.transactionPending"})},6:{...i,buttonText:(0,s.jsx)(he.Trans,{i18nKey:"common.fetchingRoute"})},7:{...i,buttonText:(0,s.jsx)(he.Trans,{i18nKey:"common.pay.button"})},8:{...i,buttonText:(0,s.jsx)(he.Trans,{i18nKey:"common.insufficientLiquidity"}),buttonColor:t.surface3,buttonTextColor:t.neutral1,helperText:(0,s.jsx)(he.Trans,{i18nKey:"transaction.insufficientLiquidity"})},9:{...i,buttonText:(0,s.jsx)(he.Trans,{i18nKey:"common.loadingAllowance"})},10:{...i,buttonText:(0,s.jsx)(he.Trans,{i18nKey:"swap.approveInWallet"})},11:{...i,buttonText:(0,s.jsx)(he.Trans,{i18nKey:"swap.approvalPending"})},12:{...i,disabled:!1,handleClick:n??(()=>{}),helperText:(0,s.jsx)(he.Trans,{i18nKey:"swap.approvalNeeded"}),buttonText:(0,s.jsx)(he.Trans,{i18nKey:"common.approve"})},13:{...i,handleClick:n??(()=>{}),disabled:!1,warningTextColor:t.accent1,warningText:(0,s.jsx)(he.Trans,{i18nKey:"common.priceUpdated"}),buttonText:(0,s.jsx)(he.Trans,{i18nKey:"common.pay.button"})},14:{...i,handleClick:n??(()=>{}),disabled:!1,buttonColor:a?a.priceImpactSeverity.color:i.buttonColor,helperText:(0,s.jsx)(he.Trans,{i18nKey:"common.priceImpact"}),helperTextColor:a?a.priceImpactSeverity.color:i.helperTextColor,buttonText:(0,s.jsx)(he.Trans,{i18nKey:"swap.payAnyway"})},15:{...i,handleClick:n??(()=>{}),disabled:!1,buttonText:(0,s.jsx)(he.Trans,{i18nKey:"common.pay.button"}),helperText:r?(0,s.jsx)(he.Trans,{i18nKey:"nft.refundsInEth"}):void 0}}[e]}var ye=n(25075),Te=n(32492),Ae=n(92166),be=n(12055),ke=n(80798);var we=n(74015),Pe=n(43044),Ee=n(25995);function Ne(e,t,n,s,r,a,i){try{var o=e[a](i),d=o.value}catch(l){return void n(l)}o.done?t(d):Promise.resolve(d).then(s,r)}function Ce(){const e=(0,we.z)(),t=(0,Pe.p)((e=>e.sendTransaction)),n=(0,Ee.J)((e=>e.setTransactionResponse)),{setLocked:s,setBagExpanded:r,reset:a}=(0,D.c)((({setLocked:e,setBagExpanded:t,reset:n})=>({setLocked:e,setBagExpanded:t,reset:n})));return(0,C.useCallback)(function(){var i,o=(i=function*(i,o,d=!1){if(!e)return;const l=yield t(e,o,i,d);l&&(s(!1),n(l),r({bagExpanded:!1}),a())},function(){var e=this,t=arguments;return new Promise((function(n,s){var r=i.apply(e,t);function a(e){Ne(r,n,s,a,o,"next",e)}function o(e){Ne(r,n,s,a,o,"throw",e)}a(void 0)}))});return function(e,t){return o.apply(this,arguments)}}(),[e,a,t,r,s,n])}var je=n(47832),Oe=n(92532);const _e=(0,n(92490).F)()((0,je.mW)((e=>({inputCurrency:void 0,tokenTradeInput:void 0,setInputCurrency:t=>e((()=>({inputCurrency:t}))),clearInputCurrency:()=>e((()=>({inputCurrency:void 0}))),setTokenTradeInput:t=>e((()=>({tokenTradeInput:t})))})),{name:"useTokenInput"}),Oe.X),Se=e=>{const t=e.filter((e=>e.status!==Z.ZJ.UNAVAILABLE)).map((e=>e.asset));return Re(t)},Re=e=>e.flatMap((e=>{const{id:t,address:n,marketplace:s,priceInfo:r,tokenId:a,tokenType:i}=e;if(!t||!s)return[];const o={amount:r.ETHPrice,token:{address:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",chainId:1,decimals:18,isNative:!0}};return[{amount:1,contractAddress:n,id:t,marketplace:s.toUpperCase(),quotePrice:o,tokenId:a,tokenType:i}]}));var Le=n(49905),$e=n(38099);function ze(e,t,n){const{hasPriceAdjustment:s,updatedAssets:r}=(0,Le.$)(e,t),a=s&&n,{unchanged:i,priceChanged:o,unavailable:d}=(0,$e.K)(r),l=r.length>0,u=o.length>0,c=d.length>0,p=u||c,m=function(e,t,n){return[...e.map((e=>({asset:e,status:Z.ZJ.UNAVAILABLE}))),...t.map((e=>({asset:e,status:Z.ZJ.REVIEWING_PRICE_CHANGE}))),...n.map((e=>({asset:e,status:Z.ZJ.REVIEWED})))]}(d,o,i),f=function(e,t,n,s){return e?t?n?Z.s.IN_REVIEW:Z.s.CONFIRM_REVIEW:s?Z.s.CONFIRM_QUOTE:Z.s.CONFIRMING_IN_WALLET:Z.s.ADDING_TO_BAG}(l,p,u,a);return{newBagItems:m,nextBagStatus:f}}function Ue(e){return{action:Z.lQ.Buy,marketplace:e.marketplace.toLowerCase(),amountIn:e.price.value,assetIn:{ETHPrice:e.price.value,baseAsset:e.price.currency,basePrice:e.price.value,baseDecimals:"18"},amountOut:e.amount.toString(),assetOut:{id:e.id,decimals:18,address:e.contractAddress,priceInfo:{ETHPrice:e.price.value,baseAsset:e.price.currency,basePrice:e.price.value,baseDecimals:"18"},tokenType:e.tokenType,tokenId:e.tokenId,amount:e.amount.toString(),marketplace:e.marketplace.toLowerCase(),orderSource:"api"}}}function Fe(e,t){const n=e.route?e.route.map(Ue):[];return{route:n,routeResponse:{route:n,valueToSend:t?void 0:e.sendAmount.value,data:e.calldata,to:e.toAddress}}}function Be(e,t,n,s,r,a,i){try{var o=e[a](i),d=o.value}catch(l){return void n(l)}o.done?t(d):Promise.resolve(d).then(s,r)}function De(e){return function(){var t=this,n=arguments;return new Promise((function(s,r){var a=e.apply(t,n);function i(e){Be(a,s,r,i,o,"next",e)}function o(e){Be(a,s,r,i,o,"throw",e)}i(void 0)}))}}function He(){const e=(0,le.m)(),{itemsInBag:t,setBagStatus:n,didOpenUnavailableAssets:s,setDidOpenUnavailableAssets:r,isLocked:a,setLocked:i,setItemsInBag:o}=(0,D.c)((({itemsInBag:e,setBagStatus:t,didOpenUnavailableAssets:n,setDidOpenUnavailableAssets:s,isLocked:r,setLocked:a,setItemsInBag:i})=>({itemsInBag:e,setBagStatus:t,didOpenUnavailableAssets:n,setDidOpenUnavailableAssets:s,isLocked:r,setLocked:a,setItemsInBag:i}))),d=_e((e=>e.tokenTradeInput)),l=(0,C.useMemo)((()=>(0,G.G7)(t)),[t]),[u]=(0,ie.useNftRouteLazyQuery)(),c=Ce(),p=(0,C.useCallback)((()=>{s&&r(!1),!a&&i(!0),n(Z.s.FETCHING_ROUTE)}),[a,s,i,n,r]);return(0,C.useCallback)(De((function*(){p(),u({variables:{senderAddress:e.address?e.address:"",nftTrades:Se(l),tokenTrades:d||void 0},onCompleted:e=>{if(!e.nftRoute||!e.nftRoute.route)return n(Z.s.ADDING_TO_BAG),void i(!1);const t=function(e){return e.filter((e=>e.status!==Z.ZJ.UNAVAILABLE)).map((e=>e.asset))}(l),s=!!d,{route:r,routeResponse:a}=Fe(e.nftRoute,s),{newBagItems:u,nextBagStatus:p}=ze(t,r,s);if(o(u),n(p),p===Z.s.CONFIRMING_IN_WALLET)return c(a,t,s),void i(!0);i(!1)}})})),[e.address,u,l,c,p,i,n,o,d])}var Ze=n(92650),Ge=n(33127);function Me(e){return e.map((e=>function(e){const t="fee"in e,n=(0,oe.isUniverseChainId)(e.chainId)?(0,Ge.getChainInfo)(e.chainId).nativeCurrency.address:Ge.DEFAULT_NATIVE_ADDRESS;return{pair:t?void 0:{tokenAmountA:{amount:e.reserve0.quotient.toString(),token:{address:e.token0.address,chainId:e.token0.chainId,decimals:e.token0.decimals,isNative:e.token0.isNative}},tokenAmountB:{amount:e.reserve1.quotient.toString(),token:{address:e.token1.address,chainId:e.token1.chainId,decimals:e.token1.decimals,isNative:e.token1.isNative}}},pool:t?{fee:e.fee,liquidity:e.liquidity.toString(),sqrtRatioX96:e.sqrtRatioX96.toString(),tickCurrent:e.tickCurrent.toString(),tokenA:{address:"address"in e.token0?e.token0.address:n,chainId:e.token0.chainId,decimals:e.token0.decimals,isNative:e.token0.isNative},tokenB:{address:"address"in e.token1?e.token1.address:n,chainId:e.token1.chainId,decimals:e.token1.decimals,isNative:e.token1.isNative}}:void 0}}(e)))}function We(e){return{...(t={inputAmount:e.inputAmount,outputAmount:e.outputAmount},{inputAmount:{amount:t.inputAmount.quotient.toString(),token:{address:t.inputAmount.currency.isToken?t.inputAmount.currency.address:Ge.DEFAULT_NATIVE_ADDRESS,chainId:t.inputAmount.currency.chainId,decimals:t.inputAmount.currency.decimals,isNative:t.inputAmount.currency.isNative}},outputAmount:{amount:t.outputAmount.quotient.toString(),token:{address:t.outputAmount.currency.isToken?t.outputAmount.currency.address:Ge.DEFAULT_NATIVE_ADDRESS,chainId:t.outputAmount.currency.chainId,decimals:t.outputAmount.currency.decimals,isNative:t.outputAmount.currency.isNative}}}),pools:Me(e.route.pools)};var t}function Ve(e,t,n){const s=_e((e=>e.setTokenTradeInput)),r=(0,ke.pG)(e)&&e.routes,a=!!e&&!!e.inputAmount&&e.inputAmount.currency.isToken,i=!!n&&!!t;(0,C.useEffect)((()=>{if(!r||!a||!i)return void s(void 0);const o=parseInt(n.multiply(100).toSignificant(2)),{mixedTokenTradeRouteInputs:d,v2TokenTradeRouteInputs:l,v3TokenTradeRouteInputs:u}=function(e){const t=[],n=[],s=[],r=e.swaps;for(const a of r)a.route.protocol===Ze.Protocol.MIXED?t.push(We(a)):a.route.protocol===Ze.Protocol.V2?n.push(We(a)):s.push(We(a));return{mixedTokenTradeRouteInputs:t.length>0?t:void 0,v2TokenTradeRouteInputs:n.length>0?n:void 0,v3TokenTradeRouteInputs:s.length>0?s:void 0}}(e),c={mixedRoutes:d,tradeType:ie.TokenTradeType.ExactOutput,v2Routes:l,v3Routes:u},p="permitSignature"in t&&t.permitSignature?{details:{amount:t.permitSignature.details.amount.toString(),expiration:t.permitSignature.details.expiration.toString(),nonce:t.permitSignature.details.nonce.toString(),token:t.permitSignature.details.token},sigDeadline:t.permitSignature.sigDeadline.toString(),signature:t.permitSignature.signature,spender:t.permitSignature.spender}:void 0;s({permit:p,routes:c,slippageToleranceBasisPoints:o,tokenAmount:{amount:e.inputAmount.quotient.toString(),token:{address:e.inputAmount.currency.address,chainId:e.inputAmount.currency.chainId,decimals:e.inputAmount.currency.decimals,isNative:e.inputAmount.currency.isNative}}})}),[t,n,i,a,r,s,e])}var Ke=n(1066);var qe=n(57221),Xe=n(86082),Ye=n(56363),Je=n(3684),Qe=n(64077);const et=d.ZP.div`
  padding: 0px 12px;
`,tt=d.ZP.div`
  border-top: 1px solid ${({theme:e})=>e.surface3};
  color: ${({theme:e})=>e.neutral1};
  display: flex;
  flex-direction: column;
  margin: 0px 16px 8px;
  padding: 12px 0px;
  border-bottom-left-radius: 12px;
  border-bottom-right-radius: 12px;
`,nt=(0,d.ZP)(ne.ZP)`
  padding-top: 8px;
  padding-bottom: 16px;
`,st=(0,d.ZP)(se.ZP)`
  justify-content: space-between;
  align-items: start;
  gap: 8px;
`,rt=(0,d.ZP)(ne.ZP)`
  text-align: end;
  overflow: hidden;
`,at=(0,d.ZP)(qe.Z)`
  width: 14px;
  margin-right: 4px;
  color: inherit;
`,it=(0,d.ZP)(Ye.T.BodyPrimary)`
  align-items: center;
  color: ${({$color:e})=>e};
  display: flex;
  justify-content: center;
  margin-bottom: 10px !important;
  text-align: center;
`,ot=(0,d.ZP)(Ye.T.BodySmall)`
  color: ${({$color:e})=>e};
  display: flex;
  justify-content: center;
  text-align: center;
  margin-bottom: 10px !important;
`,dt=(0,d.ZP)(se.ZP)`
  gap: 8px;
  cursor: pointer;
`,lt=d.ZP.button`
  display: flex;
  background: ${({$backgroundColor:e})=>e};
  color: ${({$color:e})=>e};
  font-weight: 535;
  line-height: 24px;
  font-size: 16px;
  gap: 16px;
  justify-content: center;
  border: none;
  border-radius: 12px;
  padding: 12px 0px;
  cursor: pointer;
  align-items: center;

  &:disabled {
    opacity: 0.6;
    cursor: auto;
  }
`,ut=(0,d.ZP)(ee.X)`
  border-radius: 4px;
  width: 4rem;
  height: 20px;
  align-self: end;
`,ct=(0,d.ZP)(se.ZP)`
  align-items: center;
  gap: 8px;
  width: 100%;
  justify-content: flex-end;
`,pt=(0,d.ZP)(se.ZP)`
  align-items: center;
  gap: 8px;
`,mt=(0,d.ZP)(Ye.T.BodyPrimary)`
  line-height: 20px;
  font-weight: 535;
  overflow-x: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  scrollbar-width: none;

  ::-webkit-scrollbar {
    display: none;
  }
`,ft=({color:e,children:t})=>t?(0,s.jsxs)(it,{"data-testid":"nft-buy-button-warning",fontSize:"14px",lineHeight:"20px",$color:e,children:[(0,s.jsx)(at,{}),t]}):null,gt=({children:e,color:t})=>e?(0,s.jsx)(ot,{lineHeight:"16px",$color:t,children:e}):null,xt=({usingPayWithAnyToken:e,totalEthPrice:t,activeCurrency:n,tradeState:r,trade:a})=>{var i;const{formatEther:o,formatNumberOrString:d}=(0,O.Gb)();var l;return e?r!==be.qx.LOADING||a?(0,s.jsx)(mt,{color:r===be.qx.LOADING?"neutral3":"neutral1",children:d({input:null===(i=a)||void 0===i?void 0:i.inputAmount.toExact(),type:O.sw.NFTToken})}):(0,s.jsx)(Ye.T.BodyPrimary,{color:"neutral3",lineHeight:"20px",fontWeight:"535",children:(0,s.jsx)(he.Trans,{i18nKey:"swap.fetchingPrice"})}):(0,s.jsxs)(Ye.T.BodyPrimary,{lineHeight:"20px",fontWeight:"535",children:[o({input:t.toString(),type:O.sw.NFTToken}),"\xa0",(null===(l=n)||void 0===l?void 0:l.symbol)??"ETH"]})},ht=({usdcValue:e,priceImpact:t,tradeState:n,usingPayWithAnyToken:r})=>{var a;const{formatNumberOrString:i}=(0,O.Gb)();return e?(0,s.jsxs)(ct,{children:[t&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(te.ud,{text:(0,he.t)("swap.estimatedDifference.label"),children:(0,s.jsxs)(pt,{children:[(0,s.jsx)(qe.Z,{color:t.priceImpactSeverity.color,size:"16px"}),(0,s.jsxs)(Ye.T.BodySmall,{style:{color:t.priceImpactSeverity.color},lineHeight:"20px",children:["(",t.displayPercentage(),")"]})]})})}),(0,s.jsx)(Ye.T.BodySmall,{color:"neutral3",lineHeight:"20px",children:`${i({input:null===(a=e)||void 0===a?void 0:a.toExact(),type:O.sw.FiatNFTToken})}`})]}):!r||n!==be.qx.INVALID&&n!==be.qx.NO_ROUTE_FOUND?(0,s.jsx)(ut,{}):null},vt=[Z.s.FETCHING_ROUTE,Z.s.CONFIRMING_IN_WALLET,Z.s.FETCHING_FINAL_ROUTE,Z.s.PROCESSING_TRANSACTION],It=({setModalIsOpen:e,eventProperties:t})=>{var n,a,i,o;const d=(0,X.Q)(),l=(0,y.useTheme)(),u=(0,le.m)(),p=(0,Je.Nb)(u.chainId),m=u.isConnected&&u.chainId,f=(0,ye.P)(),{inputCurrency:g}=_e((({inputCurrency:e})=>({inputCurrency:e}))),x=_e((e=>e.setInputCurrency)),h=(0,de.U8)("ETH"),v=(0,fe.mM)(u.address,g&&g.isToken?g:void 0),{isLocked:I,bagStatus:T,setBagExpanded:A,setBagStatus:b}=(0,D.c)((({isLocked:e,bagStatus:t,setBagExpanded:n,setBagStatus:s})=>({isLocked:e,bagStatus:t,setBagExpanded:n,setBagStatus:s}))),[k,w]=(0,C.useState)(!1),P=vt.includes(T),E=g??h,N=!!g&&u.chainId===oe.UniverseChainId.Mainnet,{universalRouterAddress:j,universalRouterAddressIsLoading:_}=function(){var e,t;const{data:n,loading:s}=(0,ie.useNftUniversalRouterAddressQuery)({fetchPolicy:"no-cache"});return{universalRouterAddress:null===(t=n)||void 0===t||null===(e=t.nftRoute)||void 0===e?void 0:e.toAddress,universalRouterAddressIsLoading:s}}();!function(e){const t=(0,Pe.p)((e=>e.state)),n=(0,Pe.p)((e=>e.setState)),s=(0,C.useRef)(t),{setBagStatus:r,setLocked:a}=(0,D.c)((({setBagExpanded:e,setBagStatus:t,setLocked:n})=>({setBagExpanded:e,setBagStatus:t,setLocked:n})));(0,C.useEffect)((()=>{Pe.p.subscribe((e=>s.current=e.state))}),[]),(0,C.useEffect)((()=>{s.current===Z.c$.Confirming&&r(Z.s.PROCESSING_TRANSACTION),s.current!==Z.c$.Denied&&s.current!==Z.c$.Invalid||(s.current===Z.c$.Invalid?r(Z.s.WARNING):r(Z.s.CONFIRM_REVIEW),n(Z.c$.New),a(!1),e(!1))}),[a,r,e,n,s.current])}(e);const S=He(),R=(0,C.useMemo)((()=>(0,ge.Z)((0,c.formatEther)(f.toString()),h??void 0)),[h,f]),{state:L,trade:$,maximumAmountIn:z,allowedSlippage:U}=function(e,t){const{state:n,trade:s}=(0,Ae.C)(q.TradeType.EXACT_OUTPUT,t,e??void 0,be.R5.API),r=(0,Te.Z)((0,ke.pG)(s)?s:void 0),a=(0,C.useMemo)((()=>{var e,t;const n=null===(e=s)||void 0===e?void 0:e.maximumAmountIn(r);return(null===(t=n)||void 0===t?void 0:t.currency.isToken)?n:void 0}),[r,s]);return(0,C.useMemo)((()=>({state:n,trade:s,maximumAmountIn:a,allowedSlippage:r})),[r,a,n,s])}(N?g:void 0,R),F=(0,ue.Z)(z,function(e,t){if(e)return e===oe.UniverseChainId.Mainnet?t??(0,ae.UNIVERSAL_ROUTER_ADDRESS)(ae.UniversalRouterVersion.V1_2,e):(0,ae.UNIVERSAL_ROUTER_ADDRESS)(ae.UniversalRouterVersion.V1_2,e)}(p?u.chainId:void 0,j),be.d7.Classic),B=F.state===ue.K.LOADING||_;Ve($,F,U);const H=function(e){const t=(0,y.useTheme)(),{formatPercent:n}=(0,O.Gb)();return(0,C.useMemo)((()=>{const s=e?(0,Ke.QW)(e):void 0,r=s?(0,Ke.BK)(s):void 0,a="error"===r?t.critical:"warning"===r?t.deprecated_accentWarning:void 0;return s&&r&&a?{priceImpactSeverity:{type:r,color:a},displayPercentage:()=>n(s)}:void 0}),[n,t.critical,t.deprecated_accentWarning,e])}($),G=(0,Qe.useUSDCValue)(null===(n=$)||void 0===n?void 0:n.inputAmount),M=(0,Qe.useUSDCValue)(R),K=N?G:M,ee=(0,de.U8)(re.d),te=(0,fe.ZP)(u.address??void 0,ee),se=(0,C.useMemo)((()=>{var e;if(!m||u.chainId!==oe.UniverseChainId.Mainnet)return;if(g){var t;const e=null===(t=$)||void 0===t?void 0:t.inputAmount;if(!v||!e)return;return!v.lessThan(e)}if(!ee)return;const n=q.CurrencyAmount.fromRawAmount(ee,me().BigInt(f));return null===(e=te)||void 0===e?void 0:e.greaterThan(n)}),[m,u.chainId,g,ee,f,te,null===(a=$)||void 0===a?void 0:a.inputAmount,v]);(0,C.useEffect)((()=>{b(Z.s.ADDING_TO_BAG)}),[g,b]);const pe=(0,ce.o)(),{buttonText:xe,buttonTextColor:we,disabled:Ee,warningText:Ne,warningTextColor:Ce,helperText:je,helperTextColor:Oe,handleClick:Se,buttonColor:Re}=(0,C.useMemo)((()=>{if(m&&u.chainId!==oe.UniverseChainId.Mainnet){const e=()=>pe(oe.UniverseChainId.Mainnet);return Ie(ve.NOT_SUPPORTED_CHAIN,l,e)}if(!1===se)return Ie(ve.INSUFFICIENT_BALANCE,l);if(T===Z.s.WARNING)return Ie(ve.ERROR,l);if(!m){const e=()=>{d.open(),A({bagExpanded:!1})};return Ie(ve.WALLET_NOT_CONNECTED,l,e)}if(T===Z.s.FETCHING_FINAL_ROUTE||T===Z.s.CONFIRMING_IN_WALLET)return Ie(ve.IN_WALLET_CONFIRMATION,l);if(T===Z.s.PROCESSING_TRANSACTION)return Ie(ve.PROCESSING_TRANSACTION,l);if(N&&L!==be.qx.VALID)return L===be.qx.INVALID?Ie(ve.INVALID_TOKEN_ROUTE,l):L===be.qx.NO_ROUTE_FOUND?Ie(ve.NO_TOKEN_ROUTE_FOUND,l):Ie(ve.FETCHING_TOKEN_ROUTE,l);const e=F.state===ue.K.REQUIRED,t=()=>e&&F.approveAndPermit();return B?Ie(ve.LOADING_ALLOWANCE,l,t):e?F.isApprovalPending?Ie(ve.IN_WALLET_ALLOWANCE_APPROVAL,l,t):F.isApprovalLoading?Ie(ve.PROCESSING_APPROVAL,l,t):Ie(ve.REQUIRE_APPROVAL,l,t):T===Z.s.CONFIRM_QUOTE?Ie(ve.CONFIRM_UPDATED_PRICE,l,S):H&&"error"===H.priceImpactSeverity.type?Ie(ve.PRICE_IMPACT_HIGH,l,S,N,H):Ie(ve.PAY,l,S,N)}),[m,u.chainId,se,T,N,L,B,F,H,l,S,pe,d,A]),Le={usd_value:null===(i=K)||void 0===i?void 0:i.toExact(),using_erc20:!!g,...t};return(0,s.jsxs)(et,{children:[(0,s.jsxs)(tt,{children:[(0,s.jsxs)(nt,{gap:"xs",children:[(0,s.jsxs)(st,{children:[(0,s.jsx)(ne.ZP,{gap:"xs",children:p&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Ye.T.SubHeaderSmall,{children:(0,s.jsx)(he.Trans,{i18nKey:"swap.payWith"})}),(0,s.jsxs)(dt,{onClick:()=>{I||(w(!0),(0,V.sendAnalyticsEvent)(r.Yz.NFT_BUY_TOKEN_SELECTOR_CLICKED))},children:[(0,s.jsx)(J.Z,{currency:E,size:24}),(0,s.jsx)(Ye.T.HeadlineSmall,{fontWeight:535,lineHeight:"24px",children:null===(o=E)||void 0===o?void 0:o.symbol}),(0,s.jsx)(Xe.Z,{size:20,color:l.neutral2})]})]})}),(0,s.jsxs)(rt,{gap:"xs",children:[(0,s.jsx)(Ye.T.SubHeaderSmall,{children:(0,s.jsx)(he.Trans,{i18nKey:"swap.total"})}),(0,s.jsx)(xt,{usingPayWithAnyToken:N,totalEthPrice:f,activeCurrency:E,tradeState:L,trade:$})]})]}),(0,s.jsx)(ht,{usdcValue:K,priceImpact:H,tradeState:L,usingPayWithAnyToken:N})]}),(0,s.jsxs)(W.default,{logPress:!0,eventOnTrigger:r.Yz.NFT_BUY_BAG_PAY,element:r.xo.NFT_BUY_BAG_PAY_BUTTON,properties:Le,logImpression:m&&!Ee,children:[(0,s.jsx)(ft,{color:Ce,children:Ne}),(0,s.jsx)(gt,{color:Oe,children:je}),(0,s.jsxs)(lt,{"data-testid":"nft-buy-button",onClick:Se,disabled:Ee||P,$backgroundColor:Re,$color:we,children:[P&&(0,s.jsx)(Y.ZP,{size:"20px",stroke:"white"}),xe]})]})]}),(0,s.jsx)(Q.Z,{isOpen:k,onDismiss:()=>w(!1),onCurrencySelect:e=>{x(e.isNative?void 0:e),e.isToken&&(0,V.sendAnalyticsEvent)(r.Yz.NFT_BUY_TOKEN_SELECTED,{token_address:e.address,token_symbol:e.symbol})},selectedCurrency:E??void 0})]})};var yt=n(42277),Tt=n(77134);const At=(0,d.ZP)(Tt.oD)`
  color: ${({theme:e})=>e.neutral2};
  cursor: pointer;
  font-weight: 535;
  font-size: 14px;
  line-height: 16px;

  :active {
    text-decoration: none;
  }
`,bt=d.ZP.button`
  align-items: center;
  background-color: transparent;
  border-radius: 8px;
  border: none;
  color: ${({theme:e})=>e.neutral1};
  cursor: pointer;
  display: flex;
  flex-direction: row;
  justify-content: flex-end;
  margin-left: auto;
  padding: 2px;
  opacity: 1;

  ${yt.c}
`,kt=d.ZP.div`
  align-items: center;
  background-color: ${({theme:e})=>e.accent1};
  border-radius: 100px;
  font-weight: bold;
  color: ${({theme:e})=>e.deprecated_accentTextLightPrimary};
  display: flex;
  font-size: 10px;
  justify-content: center;
  min-width: ${({sizing:e})=>e};
  min-height: ${({sizing:e})=>e};
  padding: 4px 6px;
`,wt=d.ZP.div`
  align-items: center;
  display: flex;
  flex-direction: row;
  gap: 8px;
  justify-content: flex-start;
  margin: 16px 28px;
  text-align: center;
`,Pt=({numberOfAssets:e,closeBag:t,resetFlow:n,isProfilePage:r})=>{const a=(0,C.useMemo)((()=>(e=>17+6*e.toString().length+"px")(e)),[e]);return(0,s.jsxs)(wt,{children:[(0,s.jsx)(Ye.T.HeadlineSmall,{children:r?(0,s.jsx)(he.Trans,{i18nKey:"common.sell.label"}):(0,s.jsx)(he.Trans,{i18nKey:"nft.bag"})}),e>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(kt,{sizing:a,children:e}),(0,s.jsx)(At,{onClick:n,children:(0,s.jsx)(he.Trans,{i18nKey:"tokens.selector.button.clear"})})]}),(0,s.jsx)(bt,{onClick:t,children:(0,s.jsx)(w.BW,{"data-testid":"nft-bag-close-icon"})})]})};var Et=n(67762);const Nt=(0,d.ZP)(l.sg)`
  gap: 12px;
  margin-top: 68px;
`,Ct=()=>{const e=(0,o.e5)();return(0,s.jsxs)(Nt,{children:[(0,s.jsx)(l.M5,{children:e?(0,s.jsx)(w.JP,{color:Et.Z4.colors.neutral3}):(0,s.jsx)(w.Ln,{color:Et.Z4.colors.neutral3,height:"96px",width:"96px",strokeWidth:"1px"})}),e?(0,s.jsx)(l.M5,{"data-testid":"nft-no-nfts-selected",className:P.v4,children:"No NFTs selected"}):(0,s.jsxs)(l.sg,{gap:"16",children:[(0,s.jsx)(l.M5,{"data-testid":"nft-empty-bag",className:P.v4,style:{lineHeight:"24px"},children:"Your bag is empty"}),(0,s.jsx)(l.M5,{fontSize:"12",fontWeight:"book",color:"neutral2",style:{lineHeight:"16px"},children:"Selected NFTs will appear here"})]})]})};var jt=n(26239);const Ot=({asset:e})=>{const t=(0,jt.P)((e=>e.removeSellAsset)),n=(0,i.d)(),[r,o]=(0,C.useState)(!1),d=()=>o(!r),u=n=>{n.preventDefault(),n.stopPropagation(),t(e)};return(0,s.jsxs)(l.X2,{className:g,onMouseEnter:d,onMouseLeave:d,children:[(0,s.jsxs)(a.x,{position:"relative",display:"flex",children:[n&&(0,s.jsx)(L,{onClick:u}),(0,s.jsx)("img",{src:e.smallImageUrl,alt:e.name,className:x})]}),(0,s.jsxs)(l.sg,{overflow:"hidden",width:"full",color:"neutral1",children:[(0,s.jsx)(l.X2,{overflow:"hidden",width:"full",justifyContent:"space-between",whiteSpace:"nowrap",gap:"16",children:(0,s.jsx)(a.x,{className:f,children:e.name||`#${e.tokenId}`})}),(0,s.jsxs)(l.X2,{overflow:"hidden",whiteSpace:"nowrap",gap:"2",children:[(0,s.jsx)(a.x,{className:h,children:e.asset_contract.name}),e.collectionIsVerified&&(0,s.jsx)(w.SA,{className:I})]})]}),r&&!n&&(0,s.jsx)(_,{onClick:u,emphasis:m.eI.medium,size:m.qE.medium,children:"Remove"})]})},_t=()=>{const e=(0,jt.P)((e=>e.sellAssets));return(0,s.jsx)(l.sg,{children:e.length?e.map(((e,t)=>(0,s.jsx)(Ot,{asset:e},t))):null})};var St=n(24358),Rt=n(14666),Lt=n(88609);var $t=n(52431),zt=n(54884);const Ut=320,Ft=360,Bt=d.ZP.div`
  position: fixed;
  display: flex;
  flex-direction: column;
  top: 88px;
  right: 20px;
  width: ${Ut}px;
  height: calc(100vh - 108px);
  background: ${({theme:e})=>e.surface1};
  border: 1px solid ${({theme:e})=>e.surface3};
  border-radius: 16px;
  box-shadow: ${({theme:e})=>e.deprecated_shallowShadow};
  z-index: ${({raiseZIndex:e,isProfilePage:t})=>e?t?zt.k.modalOverTooltip:zt.k.modalBackdrop-1:3};

  @media only screen and (max-width: ${({theme:e})=>`${e.breakpoint.sm}px`}) {
    right: 0px;
    top: 0px;
    width: 100%;
    height: 100%;
    border-radius: 0px;
    border: none;
  }

  @media only screen and (min-width: ${({theme:e})=>`${e.breakpoint.xxxl}px`}) {
    width: ${Ft}px;
  }
`,Dt=d.ZP.div`
  position: fixed;
  background: rgba(0, 0, 0, 0.7);
  top: 0px;
  width: 100%;
  height: 100%;
`,Ht=d.ZP.div`
  background: ${({theme:e})=>e.accent1};
  color: ${({theme:e})=>e.deprecated_accentTextLightPrimary};
  margin: 32px 28px 16px;
  padding: 10px 0px;
  border-radius: 12px;
  text-align: center;
  font-size: 16px;
  font-weight: 535;
  line-height: 20px;
  cursor: pointer;
  transition: ${({theme:e})=>e.transition.duration.medium};

  :hover {
    opacity: ${({theme:e})=>e.opacity.hover};
  }
`,Zt=({top:e,show:t})=>(0,s.jsx)(a.x,{marginX:"24",borderWidth:"1px",borderStyle:"solid",borderColor:"transparent",borderTopColor:e?"transparent":"surface3",borderBottomColor:e?"surface3":"transparent",opacity:t?"1":"0",transition:"250"}),Gt=()=>{const{resetSellAssets:e,sellAssets:t}=(0,jt.P)((({reset:e,sellAssets:t})=>({resetSellAssets:e,sellAssets:t}))),{setProfilePageState:n}=(0,Lt.a)((({setProfilePageState:e})=>({setProfilePageState:e}))),{bagStatus:a,bagIsLocked:d,reset:u,bagExpanded:c,toggleBag:p,setBagExpanded:m}=(0,D.c)((e=>({...e,bagIsLocked:e.isLocked,uncheckedItemsInBag:e.itemsInBag}))),{uncheckedItemsInBag:f}=(0,D.c)((({itemsInBag:e})=>({uncheckedItemsInBag:e}))),g=(0,o.e5)(),x=(0,o._3)(),h=(0,o.GZ)(),v=(0,i.d)(),I=(0,C.useMemo)((()=>(0,G.G7)(f)),[f]),[y,T]=(0,C.useState)(!1),{userCanScroll:A,scrollRef:b,scrollProgress:k,scrollHandler:w}=function(){const[e,t]=(0,C.useState)(!1),[n,s]=(0,C.useState)(0);return{scrollRef:n=>{if(null!==n){const s=n.scrollHeight>n.clientHeight;s!==e&&t(s)}},scrollHandler:e=>{const t=e.currentTarget.scrollTop,n=e.currentTarget.clientHeight,r=e.currentTarget.scrollHeight;s(t?(t+n)/r*100:0)},scrollProgress:n,userCanScroll:e}}(),P=(0,C.useCallback)((()=>{m({bagExpanded:!1,manualClose:!0})}),[m]);(0,C.useEffect)((()=>{d&&!y&&T(!0)}),[d,y]);const E=I.length>0,N=I.length>0,j=t.length>0,O=Boolean(!g&&!N&&a===Z.s.ADDING_TO_BAG||g&&!j),_=(0,C.useMemo)((()=>({...(0,M.H)(I.map((e=>e.asset)))})),[I]);return c&&h?(0,s.jsxs)(St.h,{children:[(0,s.jsxs)(Bt,{"data-testid":"nft-bag",raiseZIndex:v||y,isProfilePage:g,children:[(0,s.jsx)(Pt,{numberOfAssets:g?t.length:I.length,closeBag:P,resetFlow:g?e:u,isProfilePage:g}),O&&(0,s.jsx)(Ct,{}),(0,s.jsx)(Zt,{top:!0,show:A&&k>0}),(0,s.jsx)(l.sg,{ref:b,className:"_1jcz50r1 rgw6ez2ef rgw6ez2jx rgw6ez1yr rgw6ez8ct",onScroll:w,gap:"12",children:g?(0,s.jsx)(_t,{}):(0,s.jsx)(K,{})}),E&&!g&&(0,s.jsx)(It,{setModalIsOpen:T,eventProperties:_}),j&&g&&(0,s.jsx)(Ht,{onClick:()=>{p(),n($t.H.LISTING),(0,V.sendAnalyticsEvent)(r.Yz.NFT_PROFILE_PAGE_START_SELL,{list_quantity:t.length,collection_addresses:t.map((e=>e.asset_contract.address)),token_ids:t.map((e=>e.tokenId))})},children:(0,s.jsx)(he.Trans,{i18nKey:"common.button.continue"})})]}),x?(0,s.jsx)(Dt,{onClick:p}):y&&(0,s.jsx)(Rt.a,{onClick:()=>d?void 0:T(!1)})]}):null}},14666:(e,t,n)=>{n.d(t,{a:()=>o,U:()=>i});var s=n(92936),r=n(52843),a=(n(21422),n(62500));const i=e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},o=({onClick:e=a.default})=>(0,s.jsx)(r.x,{className:"_199qdl71 rgw6ez3f3 rgw6ez343 rgw6ez17l rgw6ez1ef rgw6ez48r rgw6ez44l rgw6ez4u3",onClick:e})},25075:(e,t,n)=>{n.d(t,{B:()=>p,P:()=>c});var s=n(11604),r=n(66284),a=n(97704),i=n(39499),o=n(99251),d=n(81179),l=n(45779),u=n(64077);function c(){const e=(0,o.c)((e=>e.itemsInBag));return(0,l.useMemo)((()=>e.reduce(((e,t)=>t.status!==d.ZJ.UNAVAILABLE?e.add(s.O$.from(t.asset.updatedPriceInfo?t.asset.updatedPriceInfo.ETHPrice:t.asset.priceInfo.ETHPrice)):e),s.O$.from(0))),[e])}function p(){const e=c(),t=(0,a.U8)("ETH"),n=(0,l.useMemo)((()=>(0,i.Z)((0,r.formatEther)(e.toString()),t??void 0)),[t,e]),s=(0,u.useUSDCValue)(n);return(0,l.useMemo)((()=>{var e;return null===(e=s)||void 0===e?void 0:e.toExact()}),[s])}},43044:(e,t,n)=>{n.d(t,{p:()=>h});var s=n(51371),r=n(11604),a=n(46854),i=n(5985);const o=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"punksOfferedForSale","outputs":[{"name":"isForSale","type":"bool"},{"name":"punkIndex","type":"uint256"},{"name":"seller","type":"address"},{"name":"minValue","type":"uint256"},{"name":"onlySellTo","type":"address"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"punkIndex","type":"uint256"}],"name":"enterBidForPunk","outputs":[],"payable":true,"type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"punkIndex","type":"uint256"},{"name":"minPrice","type":"uint256"}],"name":"acceptBidForPunk","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"addresses","type":"address[]"},{"name":"indices","type":"uint256[]"}],"name":"setInitialOwners","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"withdraw","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"imageHash","outputs":[{"name":"","type":"string"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"nextPunkIndexToAssign","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"punkIndexToAddress","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"standard","outputs":[{"name":"","type":"string"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"punkBids","outputs":[{"name":"hasBid","type":"bool"},{"name":"punkIndex","type":"uint256"},{"name":"bidder","type":"address"},{"name":"value","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"balanceOf","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"allInitialOwnersAssigned","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"allPunksAssigned","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"punkIndex","type":"uint256"}],"name":"buyPunk","outputs":[],"payable":true,"type":"function"},{"constant":false,"inputs":[{"name":"to","type":"address"},{"name":"punkIndex","type":"uint256"}],"name":"transferPunk","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"punkIndex","type":"uint256"}],"name":"withdrawBidForPunk","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"to","type":"address"},{"name":"punkIndex","type":"uint256"}],"name":"setInitialOwner","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"punkIndex","type":"uint256"},{"name":"minSalePriceInWei","type":"uint256"},{"name":"toAddress","type":"address"}],"name":"offerPunkForSaleToAddress","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"punksRemainingToAssign","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"punkIndex","type":"uint256"},{"name":"minSalePriceInWei","type":"uint256"}],"name":"offerPunkForSale","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"punkIndex","type":"uint256"}],"name":"getPunk","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"pendingWithdrawals","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"punkIndex","type":"uint256"}],"name":"punkNoLongerForSale","outputs":[],"payable":false,"type":"function"},{"inputs":[],"payable":true,"type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"punkIndex","type":"uint256"}],"name":"Assign","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"punkIndex","type":"uint256"}],"name":"PunkTransfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"punkIndex","type":"uint256"},{"indexed":false,"name":"minValue","type":"uint256"},{"indexed":true,"name":"toAddress","type":"address"}],"name":"PunkOffered","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"punkIndex","type":"uint256"},{"indexed":false,"name":"value","type":"uint256"},{"indexed":true,"name":"fromAddress","type":"address"}],"name":"PunkBidEntered","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"punkIndex","type":"uint256"},{"indexed":false,"name":"value","type":"uint256"},{"indexed":true,"name":"fromAddress","type":"address"}],"name":"PunkBidWithdrawn","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"punkIndex","type":"uint256"},{"indexed":false,"name":"value","type":"uint256"},{"indexed":true,"name":"fromAddress","type":"address"},{"indexed":true,"name":"toAddress","type":"address"}],"name":"PunkBought","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"punkIndex","type":"uint256"}],"name":"PunkNoLongerForSale","type":"event"}]');var d=n(81179),l=n(49905),u=n(23399),c=n(98282),p=n(45878),m=n(25105),f=n(12294),g=n(47832);function x(e,t,n,s,r,a,i){try{var o=e[a](i),d=o.value}catch(l){return void n(l)}o.done?t(d):Promise.resolve(d).then(s,r)}const h=(0,f.Ue)()((0,g.mW)((e=>({state:d.c$.New,txHash:"",purchasedWithErc20:!1,clearTxHash:()=>e({txHash:""}),setState:t=>e((()=>({state:t}))),sendTransaction:function(){var t,n=(t=function*(t,n,s,a){const o=yield t.getAddress();try{const l={to:s.to,value:s.valueToSend?r.O$.from(s.valueToSend):void 0,data:s.data},u=(yield t.estimateGas(l)).mul(105).div(100),c={...l,gasLimit:u};e({state:d.c$.Signing});const m=yield t.sendTransaction(c);e({state:d.c$.Confirming}),e({txHash:m.hash}),e({purchasedWithErc20:a}),(0,p.sendAnalyticsEvent)(i.Yz.NFT_BUY_BAG_SIGNED,{transaction_hash:m.hash});const f=yield m.wait();if(1===f.status){const t=v(f,o,n,s.route),r=I(n,t);return e({state:d.c$.Success}),{nftsPurchased:t,nftsNotPurchased:r,txReceipt:f}}return e({state:d.c$.Failed}),{nftsPurchased:[],nftsNotPurchased:n,txReceipt:f}}catch(l){return void(4001===l.code?e({state:d.c$.Denied}):(m.logger.error(l,{tags:{file:"nft/hooks/useSendTransaction",function:"useSendTransaction"}}),e({state:d.c$.Invalid})))}},function(){var e=this,n=arguments;return new Promise((function(s,r){var a=t.apply(e,n);function i(e){x(a,s,r,i,o,"next",e)}function o(e){x(a,s,r,i,o,"throw",e)}i(void 0)}))});return function(e,t,s,r){return n.apply(this,arguments)}}()})),{name:"useSendTransactionState"})),v=(e,t,n,r)=>{if(!e.logs)return[];const i=new s.vU(c),d=new s.vU(u),p=new s.vU(o),m=[...e.logs.filter((e=>e.topics[0]===i.getEventTopic("Transfer")&&(0,a.hexStripZeros)(e.topics[2]).toLowerCase()===t.toLowerCase())).map((e=>({address:e.address,tokenId:parseInt(e.topics[3]).toString()}))),...e.logs.filter((e=>e.topics[0]===d.getEventTopic("TransferSingle")&&(0,a.hexStripZeros)(e.topics[3]).toLowerCase()===t.toLowerCase())).map((e=>({address:e.address,tokenId:d.parseLog(e).args[3].toString()}))),...e.logs.filter((e=>e.topics[0]===p.getEventTopic("PunkTransfer")&&(0,a.hexStripZeros)(e.topics[2]).toLowerCase()===t.toLowerCase())).map((e=>({address:e.address,tokenId:p.parseLog(e).args[2].toString()})))],f=n.filter((e=>m.some((t=>e.address.toLowerCase()===t.address.toLowerCase()&&parseInt(e.tokenId).toString()===t.tokenId))));return(0,l.$)(f,r).updatedAssets},I=(e,t)=>{const n=[];return e.forEach((e=>{t.find((t=>t.address.toLowerCase()===e.address.toLowerCase()&&t.tokenId===e.tokenId))||n.push(e)})),n}},25995:(e,t,n)=>{n.d(t,{J:()=>a});var s=n(12294),r=n(47832);const a=(0,s.Ue)()((0,r.mW)((e=>({transactionResponse:void 0,setTransactionResponse:t=>e((()=>({transactionResponse:t})))})),{name:"useTransactionResponse"}))},74623:(e,t,n)=>{n.d(t,{$:()=>d,p:()=>l});var s=n(66284),r=n(53258),a=n(44958),i=n(39499),o=n(92139);const d=(e=o.UniverseChainId.Mainnet)=>{var t;const n=(0,a.Z)(e),s=(0,i.Z)("1",n);return(null===(t=(0,r.L)(s))||void 0===t?void 0:t.data)??0};function l(e){var t,n,r,a;const i=d();return i&&(null===(n=e)||void 0===n||null===(t=n.priceInfo)||void 0===t?void 0:t.ETHPrice)?(parseFloat((0,s.formatEther)(null===(a=e)||void 0===a||null===(r=a.priceInfo)||void 0===r?void 0:r.ETHPrice))*i).toString():""}},73335:(e,t,n)=>{n.d(t,{Dp:()=>l,FX:()=>p,Lr:()=>u,PZ:()=>d,fj:()=>c,oY:()=>o});var s=n(92936),r=n(52801),a=n(39550),i=n(67089);function o(e,t,n){if(e.has(t))return e.get(t);const s=n&&Array.from(n).reduce(((e,t)=>{var n;return!(!e&&!(null===(n=t)||void 0===n?void 0:n.rarity))}),!1);return s&&e.set(t,s),s}const d=(e,t)=>`/nfts/asset/${void 0!==e.address?e.address:e.asset_contract.address}/${e.tokenId}${t?`?origin=${t}`:""}`,l=(e,t="16")=>{switch(e.toLowerCase()){case a.Fz.Opensea:return(0,s.jsx)(r.bi,{width:t,height:t});case a.Fz.LooksRare:return(0,s.jsx)(r.WB,{width:t,height:t});case a.Fz.X2Y2:return(0,s.jsx)(r.hY,{width:t,height:t,gradientId:(0,i.Z)()});case a.Fz.Blur:return(0,s.jsx)(r.Y3,{width:t,height:t});case a.Fz.Sudoswap:return(0,s.jsx)(r.rq,{width:t,height:t});case a.Fz.NFTX:return(0,s.jsx)(r.QZ,{width:t,height:t,gradientId:(0,i.Z)()});case a.Fz.Gem:return(0,s.jsx)(r.B_,{width:t,height:t,gradientId:(0,i.Z)()});case a.Fz.Zora:return(0,s.jsx)(r.kB,{width:t,height:t,gradientId:(0,i.Z)()});case a.Fz.Ensvision:return(0,s.jsx)(r.GD,{width:t,height:t});case a.Fz.Cryptopunks:case"larvalabs":return(0,s.jsx)(r.jr,{width:t,height:t});case a.Fz.Rarible:return(0,s.jsx)(r.XJ,{width:t,height:t});case a.Fz.Foundation:return(0,s.jsx)(r.hs,{width:t,height:t});case a.Fz.NFT20:return(0,s.jsx)(r.hI,{width:t,height:t});default:return null}},u=e=>`https://twitter.com/intent/tweet?text=Check%20out%20${e.name?encodeURIComponent(e.name):`${e.collectionName}%20%23${e.tokenId}`}%20(${e.collectionName})%20https://app.uniswap.org/nfts/asset/${e.address}/${e.tokenId}%20via%20@uniswap`,c=(e,t)=>{const n=e.length>0&&e.some((t=>t.address!==e[0].address)),s=e.length>0&&!n?`collection/${e[0].address}`:"",r=`I just purchased ${n?`${e.length} NFTs`:`${e.length} ${e[0].collectionName??"NFT"}`} with @Uniswap \ud83e\udd84\n\nhttps://app.uniswap.org/nfts/${s}\n${t}`;return`https://twitter.com/intent/tweet?text=${encodeURIComponent(r)}`};const p=e=>{var t,n,s,r,a;const i=1==e.length?`I just listed ${(null===(t=e[0].collection)||void 0===t?void 0:t.twitterUrl)?`${null===(n=e[0].collection)||void 0===n?void 0:n.twitterUrl} `:`${null===(s=e[0].collection)||void 0===s?void 0:s.name} `??0}${e[0].name} for ${o=e[0].newListings??[],Math.min(...o.map((e=>e.price??0)))??0} ETH on ${null===(r=e[0].marketplaces)||void 0===r?void 0:r.map((e=>e.name)).join(", ")}. Buy it on @Uniswap at https://app.uniswap.org/${d(e[0])}`:`I just listed ${e.length} items on @Uniswap at https://app.uniswap.org/nfts/profile\n\nCollections: ${function(e){const t=e.map((e=>{var t,n;return(null===(t=e.collection)||void 0===t?void 0:t.twitterUrl)??(null===(n=e.collection)||void 0===n?void 0:n.name)??""}));return[...new Set(t)].map((t=>({collection:t,items:e.filter((e=>{var n,s;return(null===(n=e.collection)||void 0===n?void 0:n.twitterUrl)===t||(null===(s=e.collection)||void 0===s?void 0:s.name)===t})).map((e=>e.name??""))})))}(e).map((({collection:e,items:t})=>`${e} ${t.map((e=>e)).join(", ")}`)).join(", ")} \n\nMarketplaces: ${null===(a=e[0].marketplaces)||void 0===a?void 0:a.map((e=>e.name)).join(", ")}`;var o;return`https://twitter.com/intent/tweet?text=${encodeURIComponent(i)}`}},95928:(e,t,n)=>{n.d(t,{H:()=>r,z:()=>s});const s=(e,t)=>{var n,s;if(!e.sellorders||!t.sellorders)return!1;const r=e.sellorders[0].protocolParameters,a=t.sellorders[0].protocolParameters,i=(null===(n=r)||void 0===n?void 0:n.poolAddress)?r.poolAddress:void 0,o=(null===(s=a)||void 0===s?void 0:s.poolAddress)?a.poolAddress:void 0;return!(!i||!o)&&i===o},r=(e,t)=>e.address===t.address&&e.marketplace===t.marketplace},41694:(e,t,n)=>{n.d(t,{H:()=>s});const s=e=>({collection_addresses:e.map((e=>e.address)),token_ids:e.map((e=>e.tokenId)),token_types:e.map((e=>e.tokenType))})},64653:(e,t,n)=>{n.d(t,{G7:()=>p,Pu:()=>u,yk:()=>c});var s=n(11604),r=n(39550),a=n(81179),i=n(95928);const o="1000000000000000000",d=s.O$.from("5000000000000000");const l=(e,t=0)=>{if(!e.sellorders)return;const n=(e=>{var t,n,s,r,a,i;return{delta:(null===(t=e)||void 0===t?void 0:t.delta)?e.delta:void 0,fee:(null===(n=e)||void 0===n?void 0:n.ammFeeFixed)?e.ammFeeFixed:void 0,spotPrice:null===(r=e)||void 0===r||null===(s=r.poolMetadata)||void 0===s?void 0:s.spotPrice,bondingCurve:null===(i=e)||void 0===i||null===(a=i.poolMetadata)||void 0===a?void 0:a.bondingCurve}})(e.sellorders[0].protocolParameters);if(!n.fee||!n.delta||!n.spotPrice||!n.bondingCurve)return;let r=s.O$.from(n.spotPrice);const a=s.O$.from(n.delta),i=s.O$.from(n.fee);if("LINEAR"===n.bondingCurve)r=((e,t,n=0)=>{for(let s=0;s<=n;s++)e=e.add(t);return e})(r,a,t);else if("EXPONENTIAL"===n.bondingCurve)r=((e,t,n=0)=>{for(let r=0;r<=n;r++)e=e.mul(t).div(s.O$.from(o));return e})(r,a,t);else{if("XYK"!==n.bondingCurve)return;{const e=((e,t,n=0)=>{let r=s.O$.from(t.spotPrice),a=s.O$.from(t.delta);if(a.sub(s.O$.from(1)).gt(s.O$.from(0))){e=r.div(a.sub(s.O$.from(1)));for(let t=1;t<=n;t++){if(r=r.add(e),a=a.sub(s.O$.from(1)),a.sub(s.O$.from(1)).isZero())return;e=r.div(a.sub(s.O$.from(1)))}return e}})(r,n,t);if(!e)return;r=e}}return((e,t)=>{const n=e.mul(d).div(s.O$.from(o)),r=e.mul(t).div(s.O$.from(o));return e.add(n).add(r)})(r,i).toString()},u=(e,t=0)=>e.sellorders?e.marketplace===r.Fz.Sudoswap?l(e,t)??"0":((e,t=0)=>{var n,a,i,o,d,l,u;if(!e.sellorders)return"";let c=s.O$.from(0),p=s.O$.from(0);const m=e.sellorders[0].protocolParameters,f=s.O$.from(1).mul(10).pow(18),g=(null===(n=m)||void 0===n?void 0:n.ammFeePercent)?100*(100+m.ammFeePercent):11e3;if(e.marketplace===r.Fz.NFTX){const e=s.O$.from(1).mul(10).pow(16);c=s.O$.from(g).div(100).mul(t+1),c=c.mul(e),p=s.O$.from(g).div(100).mul(t),p=p.mul(e)}e.marketplace===r.Fz.NFT20&&(c=s.O$.from(100).mul(t+1),c=c.mul(f),p=s.O$.from(100).mul(t),p=p.mul(f));const x=s.O$.from((null===(o=m)||void 0===o||null===(i=o.poolMetadata)||void 0===i||null===(a=i.ethReserves)||void 0===a?void 0:a.toLocaleString("fullwide",{useGrouping:!1}))??1),h=s.O$.from((null===(u=m)||void 0===u||null===(l=u.poolMetadata)||void 0===l||null===(d=l.tokenReserves)||void 0===d?void 0:d.toLocaleString("fullwide",{useGrouping:!1}))??1),v=x.mul(c).mul(1e3),I=h.sub(c).mul(997),y=x.mul(p).mul(1e3),T=h.sub(p).mul(997);let A=v.div(I);const b=y.div(T);return A=A.sub(b),A=A.mul(101).div(100),A.toString()})(e,t):"",c=(e,t)=>{let n=s.O$.from(0);for(let a=0;a<t;a++)n=e.marketplace===r.Fz.Sudoswap?n.add(s.O$.from(l(e,a)??"0")):n.add(s.O$.from(u(e,a)));return n.div(t).toString()},p=e=>{if(!e.some((e=>e.asset.marketplace&&(0,r.g7)(e.asset.marketplace)))||e.every((e=>e.status===a.ZJ.REVIEWED||e.status===a.ZJ.REVIEWING_PRICE_CHANGE)))return e;const t=[...e];return t.forEach((e=>{if(e.asset.marketplace&&(0,r.g7)(e.asset.marketplace)){const n=e.asset,s=!!n.updatedPriceInfo,a=n.marketplace===r.Fz.Sudoswap?t.filter((t=>(0,i.z)(e.asset,t.asset))):t.filter((t=>(0,i.H)(e.asset,t.asset))),o=s?c(n,a.length):((e,t)=>e.marketplace===r.Fz.Sudoswap?l(e,t)??"":u(e,t))(n,a.findIndex((e=>e.asset.tokenId===n.tokenId)));s&&e.asset.updatedPriceInfo?e.asset.updatedPriceInfo.ETHPrice=e.asset.updatedPriceInfo.basePrice=o:e.asset.priceInfo.ETHPrice=o}})),t}},49905:(e,t,n)=>{n.d(t,{$:()=>c});var s=n(66284),r=n(39550),a=n(64653),i=n(95928);const o=(e,t)=>({hasPriceDiff:e!==t,hasVisiblePriceDiff:(0,s.formatEther)(e)!==(0,s.formatEther)(t)}),d=(e,t,n,s)=>{return!(!n||!("priceInfo"in n.assetOut))&&(!!e.marketplace&&(0,r.g7)(e.marketplace)&&(i=e,d=t.filter((t=>u(e,t,s))).length,l=n.assetOut.priceInfo.basePrice,!o((0,a.yk)(i,d),l).hasVisiblePriceDiff));var i,d,l},l=(e,t)=>t&&t.find((t=>"Buy"===t.action&&((e,t)=>"id"in t&&t.id?t.id===e.id:"address"in t&&t.address.toLowerCase()===e.address.toLowerCase()&&t.tokenId===e.tokenId)(e,t.assetOut))),u=(e,t,n)=>((e,t)=>!!l(e,t))(t,n)&&(e.marketplace===r.Fz.Sudoswap?(0,i.z)(e,t):(0,i.H)(e,t)),c=(e,t)=>{let n=!1;const s=e.map((s=>{const r=l(s,t);if(t&&!r)return{...s,isUnavailable:!0};let a=s.updatedPriceInfo?s.updatedPriceInfo:s.priceInfo;if(r&&"priceInfo"in r.assetOut){const{hasPriceDiff:i,hasVisiblePriceDiff:l}=o(a.basePrice,r.assetOut.priceInfo.basePrice);if(a=r.assetOut.priceInfo,n=i,l&&!d(s,e,r,t))return{...s,updatedPriceInfo:a}}return{...s,priceInfo:a,updatedPriceInfo:void 0,orderSource:r&&"orderSource"in r.assetOut?r.assetOut.orderSource:void 0}}));return{hasPriceAdjustment:n,updatedAssets:s}}},38099:(e,t,n)=>{n.d(t,{K:()=>o,T:()=>i});var s=n(11604);const r=e=>e.updatedPriceInfo?s.O$.from(e.updatedPriceInfo.ETHPrice).sub(s.O$.from(e.priceInfo.ETHPrice)):s.O$.from(0),a=(e,t)=>r(e).gt(r(t))?-1:1,i=e=>e&&e.reduce(((e,t)=>e.add(s.O$.from(t.updatedPriceInfo?t.updatedPriceInfo.ETHPrice:t.priceInfo.ETHPrice))),s.O$.from(0));function o(e){return{unchanged:e.filter((e=>!e.updatedPriceInfo&&!e.isUnavailable)),priceChanged:e.filter((e=>e.updatedPriceInfo)).sort(a),unavailable:e.filter((e=>e.isUnavailable))}}}}]);
//# sourceMappingURL=7125.935ac443.chunk.js.map